<div class="container mt-4">
  <h2 class="text-primary mb-4">Quản lý người dùng</h2>

  <table class="table table-bordered table-hover table-striped align-middle shadow-sm">
    <thead class="table-light text-center">
      <tr>
        <th>ID</th>
        <th>Họ tên</th>
        <th>Số điện thoại</th>
        <th>Địa chỉ</th>
        <th>Trạng thái</th>
        <th>Vai trò</th>
        <th>Hành động</th>
      </tr>
    </thead>
    <tbody>
      @for(user of users; track user.id) {
        <tr>
          <td class="text-center">{{ user.id }}</td>
          <td>{{ user.fullname }}</td>
          <td>{{ user.phone_number }}</td>
          <td>{{ user.address }}</td>
          <td class="text-center">
            <span 
              class="badge" 
              [ngClass]="{
                'bg-success': user.is_active,
                'bg-secondary': !user.is_active
              }">
              {{ user.is_active ? 'Đang hoạt động' : 'Bị khóa' }}
            </span>
          </td>
          <td class="text-center">{{ user.role.name }}</td>
          <td class="text-center">
            <div class="d-flex justify-content-center gap-2 flex-wrap">
              <button 
                class="btn btn-sm"
                [ngClass]="{
                  'btn-danger': user.is_active,
                  'btn-success': !user.is_active
                }"
                (click)="toggleUserStatus(user)">
                {{ user.is_active ? 'Khóa' : 'Mở khóa' }}
              </button>
              <button 
                class="btn btn-sm btn-primary"
                (click)="resetPassword(user.id)">
                Đặt lại mật khẩu
              </button>
            </div>
          </td>
        </tr>
      }
    </tbody>
  </table>
</div>
