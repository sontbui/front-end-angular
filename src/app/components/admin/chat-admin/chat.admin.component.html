<div class="container">
    <br>
  <div class="row">
      <!-- Danh sách user và tin nhắn cuối cùng -->
      <div class="col-md-4">
          <h3>List Users</h3>
          <ul class="list-group">
              @for(summary of userSummaries; track summary.userId) {
                  <li class="list-group-item" 
                      [ngClass]="{'active': selectedUserId === summary.userId}"
                      (click)="selectUser(summary.userId)">
                      <div class="user-info">
                          <strong>{{ summary.fullName }}</strong> ({{ summary.phoneNumber }})
            
                          <small style="color: white;">{{ summary.lastMessageTime | date:'HH:mm:ss' }}</small>
                      </div>
                  </li>
              }
          </ul>
      </div>

      <!-- Khung chat -->
      <div class="col-md-8">
          @if(selectedUserId !== null) {
              <div class="chat-container">
                  <div class="chat-messages" #chatMessages>
                      @for (message of messages; track message.id) {
                          <div class="message" [ngClass]="{'sent': message.isSent, 'received': !message.isSent}">
                              <p>{{ message.content }}</p>
                              <span class="timestamp">{{ message.timestamp | date:'HH:mm:ss' }}</span>
                          </div>
                      }
                  </div>

                  <!-- Ô nhập tin nhắn -->
                  <div class="chat-input">
                      <input type="text" class="form-control" placeholder="Type your message..." 
                             [(ngModel)]="newMessage" (keyup.enter)="sendMessage()">
                      <button class="btn btn-primary" (click)="sendMessage()">Send</button>
                  </div>
              </div>
          } @else {
              <p>Please select a user to start chatting.</p>
          }
      </div>
  </div>
</div>